# 基本コマンドとファイルの操作

## 変数

### シェル変数
設定されたシェルだけ使用する変数。  
子プロセスには引き継がれない。

#### 主なシェル変数

主なシェル変数
| 変数名| 説明 |
----|---- 
| PWD | カレントディレクトリの相対パス |
| PATH | コマンド検索パス |
| HOME | ユーザのホームディレクトリ |
| PS1 | プロンプトを定義 |
| PS2 | 2次プロンプトを定義 |
| HITFILE | コマンドを格納するファイルを定義 |
| LANG | 言語ファイル |

#### シェル変数のコマンド

```Shell
# 一覧表示
$ set
# TEST変数にSEを定義
$ TEST="SE"
# $TESTの値を出力
$ echo $TEST
SE
# TESTの値を確認
$ set | grep TEST
TEST=SE
# TEST変数を削除
$ unset TEST
```

### 環境変数
設定されたシェルとそのシェルで起動したプログラムが使用する変数。
子プロセスに引き継がれる。
exportコマンドにより定義。  
`env`、`printenv` のコマンドで確認が可能。

#### 環境変数の一覧表示
```Shell
$ export TEST="SE"
$ env | grep TEST
TEST=SE
```

## 作業ディレクトリの表示
pwd コマンドは現在の作業用ディレクトリを表示する。  
また、 PWD 変数には現在の作業ディレクトリの絶対パスが格納されている。  

```Shell
$ pwd
/home/hoge
$ $PWD
/home/hoge
$ ${PWD}
/home/hoge
```

## シェルパラメータ・オプション

主なオプション
| 主なオプション| 説明 |
----|---- 
| -O | シェルオプションを有効にする |
| +O | シェルオプションを無効にする |

主なシェルオプション
| 主なシェルオプション|  | 説明 |
----|----|---- 
| noclobber | -C | リダイレクションによる既存のファイルへの上書きを禁止する |
| histexpand | -H | 「!番号」による履歴参照を行う（デフォルトで有効） |

※リダイレクト（リダイレクション）
リダイレクトとは、UNIXのシェル、MS-DOSのコマンドプロンプトなどで、標準の入出力先を別の入出力先に変更することである。   
リダイレクトすることによって、キーボードからの入力をファイルからのデータ読み取りに変更したり、画面表示をファイルに書き込んだり、プリンターで印刷するすることができる。

## プロンプト定義で使える表記

| 主な表記| 説明 |
----|---- 
| \s | シェルの名前 |
| \v | bash のバージョン |
| \u | ユーザ名 |
| \h | ホスト名のうちの最初の . まで |
| \w | 現在の作業ディレクトリ |

設定例1
```Shell
$ PS1='\s - \v\$'
bash-4.2$
```

設定例2
```Shell
$ PS1='[\u@\h \w]$ '
[hoge@localhost ~]$ 
```

設定例3
改行エスケープして二次プロンプト（PS2）の > が表示されている
```Shell
$ ls /etc/passwd \
> /etc/shadow
```

## ディレクトリ移動

`cd [ディレクトリ名]` で指定のディレクトリに移動

ディレクトリの特殊記号
| 記号 | 読み方 | 説明 |
----|----|---- 
| / | スラッシュ | ルートディレクトリ。ファイルシステムの頂点（ルートを指す） |
| ~ | チルダ | ホームディレクトリ、実行ユーザの作業用ディレクトリを表す |
| . | ドット | カレントディレクトリ。実行ユーザが作業を行っているディレクトリを表す |
| .. | ドットドット | 親ディレクトリ。あるディレクトリを起点とした一つ上の階層にあるディレクトリを表す |

## マニュアル

ソフトウェアのマニュアルを参照
`man [オプション] [セクション] コマンドまたはキーワード` 

ディストリビューションに**含まれる**パッケージをインストール → /usr/local/manual  
ディストリビューションに**含まれない**パッケージをインストール → /usr/local/share/manual  
  
オプション
| 主なオプション | 説明 |
----|----
| -f | キーワードと完全に一致するマニュアルが何セクションにあるか表示する |
| -k | キーワードを含むマニュアルが何セクションにあるか表示する |

キー操作
| 主なキー操作 | 説明 |
----|----
| Space | 次のページを表示 |
| Enter | 次の行を表示 |
| b | 前のページを表示 |
| h | ヘルプを表示 |
| q | man コマンドの終了 |
| /文字列 | 指定した文字列で検索（nキーで次の文字列を検索） |

## コマンド履歴

コマンド履歴は `history [オプション] [履歴数]` で取得。  
コマンド履歴の保存場所は `~/.bash_history`。  

オプション
| 主なオプション | 説明 |
----|----
| -C | キーワードと完全に一致するマニュアルが何セクションにあるか表示する |
| -d [履歴番号] | 指定した履歴番号のコマンドをそのシェルの履歴から消去する |


キー操作
| 主なキー操作 | 説明 |
----|----
| ↑ | 1つ前のコマンドを表示 |
| ↓ | 1つ後のコマンドを表示 |
| !! | 直前に実行したコマンドを実行 |
| ![履歴番号] | 指定された履歴番号のコマンドを実行 |
| ![文字列] | 指定した文字列から始まる直近のコマンドを実行 |

# アカウントの切り替え

`su [オプション] [変更ユーザ名]` アカウントを切り替える。  
`su - [変更ユーザ名]` 切り替えた後のユーザのログイン環境になる。  
`su [コマンド]` 事前に管理者に許可されている管理者コマンドを実行。   


# ディレクトリの作成

`mkdir [オプション]　ディレクトリ名...n`

オプション
| 主なオプション | 説明 |
----|----
| -m[アクセス権] | 明示的にアクセス権を指定してディレクトリを作成する |
| -p | 中間ディレクトリも同時に作成 |

